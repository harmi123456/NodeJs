<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Page</title>

    <link rel="stylesheet" href="style.css">

    <!-- //font awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
        integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- //bootStrape -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">


    <!-- jQuery & jQuery UI -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">


</head>



<body>

    <div class="container">

        <div class="setting-container">

            <h1>Edit Profile</h1>      

        </div>


        <hr>

        <div class="row">

            <!-- edit form column -->
            <div class="col-md-12 personal-info ">


                <h3>Personal info</h3>

                <form class="form-horizontal d-flex" role="form" action="<%= isEdit ? `/update` : `addUser` %>"
                    method="post" enctype="multipart/form-data">

                    <input type="hidden" name="id" value="<%= data ? data._id : '' %>">

                    <div class="col-md-3">

                        <div class="text-center">
                            <!-- Image Preview -->
                            <img id="previewImg"
                                src="/uploads/<%= data && data.pic ? data.pic.split('\\').pop() : 'default-image.png' %>"
                                class="avatar img-circle" alt="avatar"
                                style="height: 150px; width: 150px; object-fit: cover;">


                            <h6 class="mt-2">Upload a different photo...</h6>

                            <!-- File Input -->
                            <input type="file" class="form-control mt-2" id="fileInput" name="pic" accept="image/*">

                        </div>


                    </div>


                    <div class="col-md-9 ms-5">

                        <div class="form-group mt-3">
                            <label class="col-md-3 control-label">Username:</label>
                            <div class="col-md-8">
                                <input class="form-control" type="text" name="userName"
                                    value="<%= data ? data.userName : '' %>">
                            </div>
                        </div>

                        <div class="form-group mt-3">
                            <label class="col-lg-3 control-label">Email:</label>
                            <div class="col-lg-8">
                                <input class="form-control" type="email" name="email"
                                    value="<%= data ? data.email : '' %>">
                            </div>
                        </div>

                        <div class="form-group mt-3">
                            <label class="col-lg-3 control-label">Mobile no:</label>
                            <div class="col-lg-8">
                                <input class="form-control" type="text" name="phon1"
                                    value="<%= data ? data.phon1 : '' %>">
                            </div>
                        </div>

                        <div class="form-group mt-3">
                            <label class="col-lg-3 control-label">Address:</label>
                            <div class="col-lg-8">
                                <input class="form-control" type="text" name="address"
                                    value="<%= data ? data.address : '' %>">
                            </div>
                        </div>

                        <div class="form-group mt-3">
                            <label class="col-lg-3 control-label">profession:</label>
                            <div class="col-lg-8">
                                <input class="form-control" type="text" name="profession"
                                    value="<%= data ? data.profession : '' %>">
                            </div>
                        </div>






                        <div class="form-group">
                            <label class="col-md-3 control-label"></label>
                            <div class="col-md-8">
                                <input type="submit" class="btn btn-primary" value="Save Changes">
                                <span></span>
                                <input type="reset" class="btn btn-default" value="Cancel">
                            </div>
                        </div>

                    </div>



                </form>

            </div>


        </div>
    </div>
    <hr>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

</body>

</html>


<script>
    $(document).ready(function () {
        // jQuery UI Tabs Initialization
        $("#tabs").tabs({
            activate: function (event, ui) {
                var active = $("#tabs").tabs("option", "active");
                $("#tabid").html("The tab ID is " + $("#tabs ul>li a").eq(active).attr("href"));
            }
        });

        // Settings Button Click
        $("#setting-btn").on("click", function () {
            $("#settings-menu").toggleClass("active");
        });
    });

</script>

<script>
    document.getElementById('fileInput').addEventListener('change', function (event) {
        const file = event.target.files[0];

        if (file) {
            const reader = new FileReader();

            reader.onload = function (e) {
                document.getElementById('previewImg').src = e.target.result;
            };

            reader.readAsDataURL(file);
        }
    });
</script>